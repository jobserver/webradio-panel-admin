app.controller("banner",function(a,d,f,g,h,k,e,l){a.lista=[];a.enqueteStatus=["","Ativo","Suspenso"];a.ordenacao={campo:"data_cadastro",direcao:"desc"};a.CampoBuscar=null;a.enqueteAtivo={};a.form={};a.ordernar=function(b){a.ordenacao.direcao="asc"==a.ordenacao.direcao?"desc":"asc";a.ordenacao.campo=b;a.getBusca(0,a.CampoBuscar)};a.lerBanner=function(b){a.form=angular.copy(b);a.form.data_cadastro=e("toDate")(a.form.data_cadastro)};a.novoBanner=function(){a.form={}};a.getBusca=function(b,c){b=void 0===
b?0:b;c=void 0===c?"":c;$("#modalProcessando").modal("open");d({method:"POST",url:a.instalacao+"/admin/banner/get/"+b,data:{filtro:c,ordenacao:a.ordenacao},headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},timeout:3E4}).then(function(b){a.lista=b.data;$("#modalProcessando").modal("close");$("#CampoBuscar").focus()},function(a){$("#modalProcessando").modal("close");M.toast({html:"Falha ao listar Banners. Verifiqe sua conex\u00e3o ou tente mais tarde.",classes:"red"})})};
a.salvar=function(){$("#modalProcessando").modal("open");var b=angular.copy(a.form);b.radio_codigo=a.radioId;var c=new FormData,e=document.getElementById("arquivo").files[0];c.append("arquivo",e);c.append("dados",angular.toJson(b));d({method:"POST",url:a.instalacao+"/admin/banner/salvar",data:c,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(b){$("#modalProcessando").modal("close");$("#lerBanner").modal("close");M.toast({html:b.data.status.frase,classes:b.data.status.classe});
a.getBusca()})["catch"](function(a){$("#modalProcessando").modal("close");M.toast({html:"Erro ao salvar, tente mais tarde",classes:"red"})})["finally"](function(){$("#modalProcessando").modal("close")})};a.excluir=function(){$("#modalProcessando").modal("open");d.post(a.instalacao+"/admin/banner/apagar",{id:a.form.id}).then(function(b){$("#modalProcessando").modal("close");$("#lerBanner").modal("close");M.toast({html:b.data.status.frase,classes:b.data.status.classe});a.getBusca()},function(a){$("#modalProcessando").modal("close");
M.toast({html:"Falha ao excluir. Verifiqe sua conex\u00e3o ou tente mais tarde.",classes:"red"})})}});